<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>machine learning with python(2) | JonOnEarth</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><meta name="generator" content="Hexo 4.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">machine learning with python(2)</h1><a id="logo" href="/.">JonOnEarth</a><p class="description">加油中国</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/DailyNote/"><i class="fa fa-user"> DailyNote</i></a><a href="/about/"><i class="fa fa-user"> About</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">machine learning with python(2)</h1><div class="post-meta">May 18, 2018<span> | </span><span class="category"><a href="/categories/%E6%9C%BA%E6%A2%B0%E5%85%AC%E6%95%8C/">机械公敌</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a class="disqus-comment-count" data-disqus-identifier="2018/05/18/machine-learning-with-python-2/" href="/2018/05/18/machine-learning-with-python-2/#disqus_thread"></a><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Contents</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#load-data"><span class="toc-number">1.</span> <span class="toc-text">load data</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Load-csv-with-python"><span class="toc-number">1.1.</span> <span class="toc-text">Load csv with python</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Load-csv-with-numpy"><span class="toc-number">1.2.</span> <span class="toc-text">Load csv with numpy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Load-csv-with-pandas"><span class="toc-number">1.3.</span> <span class="toc-text">Load csv with pandas</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#理解你的数据with统计描述"><span class="toc-number">2.</span> <span class="toc-text">理解你的数据with统计描述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数据一瞥"><span class="toc-number">2.1.</span> <span class="toc-text">数据一瞥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据维度"><span class="toc-number">2.2.</span> <span class="toc-text">数据维度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#每个属性的数据类型"><span class="toc-number">2.3.</span> <span class="toc-text">每个属性的数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#统计描述"><span class="toc-number">2.4.</span> <span class="toc-text">统计描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Class-Distribution-类分布"><span class="toc-number">2.5.</span> <span class="toc-text">Class Distribution(类分布)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#属性之间相关性-correlation"><span class="toc-number">2.6.</span> <span class="toc-text">属性之间相关性(correlation)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Skew-of-Univariate-Distribution-偏态分布"><span class="toc-number">2.7.</span> <span class="toc-text">Skew of Univariate Distribution(偏态分布)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tips"><span class="toc-number">2.8.</span> <span class="toc-text">Tips</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#更懂你的数据-可视化"><span class="toc-number">3.</span> <span class="toc-text">更懂你的数据-可视化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Univariate-plots-单变量画图"><span class="toc-number">3.1.</span> <span class="toc-text">Univariate plots(单变量画图)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Histograms-直方图"><span class="toc-number">3.1.1.</span> <span class="toc-text">Histograms(直方图)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Density-Plots-密度图"><span class="toc-number">3.1.2.</span> <span class="toc-text">Density Plots(密度图)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Box-and-Whisker-Plots-箱线图"><span class="toc-number">3.1.3.</span> <span class="toc-text">Box and Whisker Plots(箱线图)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Multivariate-Plots-多变量画图"><span class="toc-number">3.2.</span> <span class="toc-text">Multivariate Plots(多变量画图)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Correlation-Matrix-Plot"><span class="toc-number">3.2.1.</span> <span class="toc-text">Correlation Matrix Plot</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Scatter-Plot-Matrix-散点图"><span class="toc-number">3.2.2.</span> <span class="toc-text">Scatter Plot Matrix(散点图)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#More-links"><span class="toc-number">3.3.</span> <span class="toc-text">More links</span></a></li></ol></li></ol></div></div><div class="post-content"><p>系列整理第2篇，主要包括load data的三种方式，几种理解数据的统计手段，可视化数据。</p>
<h2 id="load-data"><a href="#load-data" class="headerlink" title="load data"></a>load data</h2><p>一般机器学习处理的数据是csv的格式，一般包括file header, comments(用#表示)，delimiter(即逗号)，quotes(数值有引用时，用双引号)</p>
<h3 id="Load-csv-with-python"><a href="#Load-csv-with-python" class="headerlink" title="Load csv with python"></a>Load csv with python</h3><p>load出来的数据先变成list,再转成array，输出给sklearn</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Load CSV Using Python Standard Library</span><br><span class="line">import csv</span><br><span class="line">import numpy</span><br><span class="line">filename &#x3D; &#39;pima-indians-diabetes.data.csv&#39;</span><br><span class="line">raw_data &#x3D; open(filename, &#39;rt&#39;)</span><br><span class="line">reader &#x3D; csv.reader(raw_data, delimiter&#x3D;&#39;,&#39;, quoting&#x3D;csv.QUOTE_NONE)</span><br><span class="line">x &#x3D; list(reader)</span><br><span class="line">data &#x3D; numpy.array(x).astype(&#39;float&#39;)</span><br><span class="line">print(data.shape)</span><br><span class="line"># out</span><br><span class="line">(768, 9)</span><br></pre></td></tr></table></figure>

<h3 id="Load-csv-with-numpy"><a href="#Load-csv-with-numpy" class="headerlink" title="Load csv with numpy"></a>Load csv with numpy</h3><p>用numpy.loadtxt(),出来的直接是array，但load出来的数据是没有header row</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Load CSV using NumPy</span><br><span class="line">from numpy import loadtxt</span><br><span class="line">filename &#x3D; &#39;pima-indians-diabetes.data.csv&#39;</span><br><span class="line">raw_data &#x3D; open(filename, &#39;rt&#39;)</span><br><span class="line">data &#x3D; loadtxt(raw_data, delimiter&#x3D;&quot;,&quot;)</span><br><span class="line">print(data.shape)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Load CSV from URL using NumPy</span><br><span class="line">from numpy import loadtxt</span><br><span class="line">from urllib.request import urlopen</span><br><span class="line">url &#x3D; &#39;https:&#x2F;&#x2F;goo.gl&#x2F;bDdBiA&#39;</span><br><span class="line">raw_data &#x3D; urlopen(url)</span><br><span class="line">dataset &#x3D; loadtxt(raw_data, delimiter&#x3D;&quot;,&quot;)</span><br><span class="line">print(dataset.shape)</span><br></pre></td></tr></table></figure>

<h3 id="Load-csv-with-pandas"><a href="#Load-csv-with-pandas" class="headerlink" title="Load csv with pandas"></a>Load csv with pandas</h3><p>终于说到最常用的load data的方式，1是因为简单，2是因为方便后续的数据理解可视化。直接用 pandas.read_csv()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from urllib.request import urlopen</span><br><span class="line"># Load CSV using Pandas</span><br><span class="line">from pandas import read_csv</span><br><span class="line">filename &#x3D; &#39;pima-indians-diabetes.data.csv&#39;</span><br><span class="line">names &#x3D; [&#39;preg&#39;, &#39;plas&#39;, &#39;pres&#39;, &#39;skin&#39;, &#39;test&#39;, &#39;mass&#39;, &#39;pedi&#39;, &#39;age&#39;, &#39;class&#39;]</span><br><span class="line">data &#x3D; read_csv(filename, names&#x3D;names) # 把names&#x3D;col_label赋值给数据</span><br><span class="line">print(data.shape)</span><br></pre></td></tr></table></figure>


<h2 id="理解你的数据with统计描述"><a href="#理解你的数据with统计描述" class="headerlink" title="理解你的数据with统计描述"></a>理解你的数据with统计描述</h2><h3 id="数据一瞥"><a href="#数据一瞥" class="headerlink" title="数据一瞥"></a>数据一瞥</h3><p>利用data.head(), default 是5行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># View first 20 rows</span><br><span class="line">from pandas import read_csv</span><br><span class="line">filename &#x3D; &quot;pima-indians-diabetes.data.csv&quot;</span><br><span class="line">names &#x3D; [&#39;preg&#39;, &#39;plas&#39;, &#39;pres&#39;, &#39;skin&#39;, &#39;test&#39;, &#39;mass&#39;, &#39;pedi&#39;, &#39;age&#39;, &#39;class&#39;]</span><br><span class="line">data &#x3D; read_csv(filename, names&#x3D;names)</span><br><span class="line">peek &#x3D; data.head(20) #20行</span><br><span class="line">print(peek)</span><br></pre></td></tr></table></figure>

<h3 id="数据维度"><a href="#数据维度" class="headerlink" title="数据维度"></a>数据维度</h3><p>用data.shape</p>
<h3 id="每个属性的数据类型"><a href="#每个属性的数据类型" class="headerlink" title="每个属性的数据类型"></a>每个属性的数据类型</h3><p>用 date.dtype</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># Data Types for Each Attribute</span><br><span class="line">from pandas import read_csv</span><br><span class="line">filename &#x3D; &quot;pima-indians-diabetes.data.csv&quot;</span><br><span class="line">names &#x3D; [&#39;preg&#39;, &#39;plas&#39;, &#39;pres&#39;, &#39;skin&#39;, &#39;test&#39;, &#39;mass&#39;, &#39;pedi&#39;, &#39;age&#39;, &#39;class&#39;]</span><br><span class="line">data &#x3D; read_csv(filename, names&#x3D;names) types &#x3D; data.dtypes print(types)</span><br><span class="line"># out</span><br><span class="line">preg int64</span><br><span class="line">plas int64</span><br><span class="line">pres int64</span><br><span class="line">skin int64</span><br><span class="line">test int64</span><br><span class="line">mass float64</span><br><span class="line">pedi float64</span><br><span class="line">age int64</span><br><span class="line">class int64</span><br><span class="line">dtype: object</span><br></pre></td></tr></table></figure>

<h3 id="统计描述"><a href="#统计描述" class="headerlink" title="统计描述"></a>统计描述</h3><p>用data.describe()<br>描述了8个统计属性：</p>
<ul>
<li>count(计数),</li>
<li>mean(平均数)，</li>
<li>Standard Deviation(标准差),</li>
<li>Minimum Value(最小值),</li>
<li>25th Percentile(第25百分位),</li>
<li>50th Percentile (Median中位数).,</li>
<li>75th Percentile(第75百分位),</li>
<li>Maximum Value(最大数)</li>
</ul>
<h3 id="Class-Distribution-类分布"><a href="#Class-Distribution-类分布" class="headerlink" title="Class Distribution(类分布)"></a>Class Distribution(类分布)</h3><p>有一些属性的值可以明显的分为几类（例如0，1），可以通过如下的方法快速的知道属性的class分布情况</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Class Distribution</span><br><span class="line">from pandas import read_csv</span><br><span class="line">filename &#x3D; &quot;pima-indians-diabetes.data.csv&quot;</span><br><span class="line">names &#x3D; [&#39;preg&#39;, &#39;plas&#39;, &#39;pres&#39;, &#39;skin&#39;, &#39;test&#39;, &#39;mass&#39;, &#39;pedi&#39;, &#39;age&#39;, &#39;class&#39;]</span><br><span class="line">data &#x3D; read_csv(filename, names&#x3D;names)</span><br><span class="line">class_counts &#x3D; data.groupby(&#39;class&#39;).size()</span><br><span class="line">print(class_counts)</span><br><span class="line"># out 看出class 那一列可以分为0，1类别，各有500和268行</span><br><span class="line">class</span><br><span class="line">0 500</span><br><span class="line">1 268</span><br></pre></td></tr></table></figure>

<h3 id="属性之间相关性-correlation"><a href="#属性之间相关性-correlation" class="headerlink" title="属性之间相关性(correlation)"></a>属性之间相关性(correlation)</h3><p>相关性是指两个变量之间的相关性。<br>一般使用 <a href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient" target="_blank" rel="noopener">Pearson’s Correlation coefficient</a>, 假设属性是正太分布的（这里不是很懂，待查）。<br>0 表示没有相关性，1 和 -1 表示完全相关和负相关。<br>在机器学习中，弱相关性对于机器学习训练结果好，而强相关性很不利于线性和逻辑回归等算法。有可能去掉其中其中属性列再训练。<br>利用Pandas DataFrame中data.corr() 可以直接计算相关系数矩阵。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Pairwise Pearson correlations</span><br><span class="line">from pandas import read_csv</span><br><span class="line">from pandas import set_option</span><br><span class="line">filename &#x3D; &quot;pima-indians-diabetes.data.csv&quot;</span><br><span class="line">names &#x3D; [&#39;preg&#39;, &#39;plas&#39;, &#39;pres&#39;, &#39;skin&#39;, &#39;test&#39;, &#39;mass&#39;, &#39;pedi&#39;, &#39;age&#39;, &#39;class&#39;]</span><br><span class="line">data &#x3D; read_csv(filename, names&#x3D;names)</span><br><span class="line">set_option(&#39;display.width&#39;, 100)  #屏幕横向最多显示100个字符</span><br><span class="line">set_option(&#39;precision&#39;, 3) #小数点后显示3位</span><br><span class="line">correlations &#x3D; data.corr(method&#x3D;&#39;pearson&#39;)</span><br><span class="line">print(correlations)</span><br></pre></td></tr></table></figure>
<p><a href="https://www.cnblogs.com/yesuuu/p/6100714.html" target="_blank" rel="noopener">set_option 函数可以参考</a></p>
<p><img src="/images/%E7%9B%B8%E5%85%B3%E6%80%A7%E7%9F%A9%E9%98%B5.png" alt="得到的相关性矩阵"></p>
<h3 id="Skew-of-Univariate-Distribution-偏态分布"><a href="#Skew-of-Univariate-Distribution-偏态分布" class="headerlink" title="Skew of Univariate Distribution(偏态分布)"></a>Skew of Univariate Distribution(偏态分布)</h3><p>很多机器学习算法假设数据变量是高斯分布的。但有一些变量分布倾斜或者squash在一个方向等(中文叫<a href="https://baike.baidu.com/item/%E5%81%8F%E6%80%81%E7%B3%BB%E6%95%B0/10793795?fr=aladdin" target="_blank" rel="noopener">偏态分布</a>)，所以可以纠正它的倾斜性从而提高模型准确度，一般尝试取对数，缩小差异。</p>
<p>0表示不偏，越远离0表示越偏斜 中位数和平均数之差的三次方 除以 标准差三次方</p>
<p>通过Pandas dataframe中函数 skew()知道分布</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># Skew for each attribute</span><br><span class="line">from pandas import read_csv</span><br><span class="line">filename &#x3D; &quot;pima-indians-diabetes.data.csv&quot;</span><br><span class="line">names &#x3D; [&#39;preg&#39;, &#39;plas&#39;, &#39;pres&#39;, &#39;skin&#39;, &#39;test&#39;, &#39;mass&#39;, &#39;pedi&#39;, &#39;age&#39;, &#39;class&#39;]</span><br><span class="line">data &#x3D; read_csv(filename, names&#x3D;names)</span><br><span class="line">skew &#x3D; data.skew() print(skew)</span><br><span class="line"># out</span><br><span class="line">preg 0.901674</span><br><span class="line">plas 0.173754</span><br><span class="line">pres -1.843608</span><br><span class="line">skin 0.109372</span><br><span class="line">test 2.272251</span><br><span class="line">mass -0.428982</span><br><span class="line">pedi 1.919911</span><br><span class="line">age 1.129597</span><br><span class="line">class 0.635017</span><br></pre></td></tr></table></figure>

<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><ul>
<li>查看数据。统计描述并不是全部，停下来看看数据，想一想。</li>
<li>ask why. 问一些和主题相关的问题</li>
<li>写下想到ideas，以及后面可以尝试的想法</li>
</ul>
<h2 id="更懂你的数据-可视化"><a href="#更懂你的数据-可视化" class="headerlink" title="更懂你的数据-可视化"></a>更懂你的数据-可视化</h2><h3 id="Univariate-plots-单变量画图"><a href="#Univariate-plots-单变量画图" class="headerlink" title="Univariate plots(单变量画图)"></a>Univariate plots(单变量画图)</h3><h4 id="Histograms-直方图"><a href="#Histograms-直方图" class="headerlink" title="Histograms(直方图)"></a>Histograms(直方图)</h4><p>最快的方式可以让你看到每个变量的分布情况。y轴是count。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data.hist()</span><br><span class="line">pyplot.show()</span><br></pre></td></tr></table></figure>
<p>![Histograms of each attribute](/images/Histograms of each attribute.png)</p>
<p>可以看出大概他们的分布，例如age,pedi,preg,test他们大概是指数分布，而mass,pres，plas可能是高斯分布。class 一下可以分为两类</p>
<h4 id="Density-Plots-密度图"><a href="#Density-Plots-密度图" class="headerlink" title="Density Plots(密度图)"></a>Density Plots(密度图)</h4><p>密度图比直方图更能表示出数据分布的特点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.plot(kind&#x3D;&#39;density&#39;, subplots&#x3D;True, layout&#x3D;(3,3), sharex&#x3D;False) pyplot.show()</span><br></pre></td></tr></table></figure>
<p>![Density plots of each attribute](/images/Density plots of each attribute.png)</p>
<h4 id="Box-and-Whisker-Plots-箱线图"><a href="#Box-and-Whisker-Plots-箱线图" class="headerlink" title="Box and Whisker Plots(箱线图)"></a>Box and Whisker Plots(箱线图)</h4><p><a href="http://wiki.mbalib.com/wiki/%E7%AE%B1%E7%BA%BF%E5%9B%BE" target="_blank" rel="noopener">箱线图</a> 画出Q1（25分位），Q2（中位数），Q3（75分位），下边界（Q1-1.5<em>(Q3-Q1)）,上边界（Q3+1.5</em>(Q3-Q1)）</p>
<p>为什么要画箱线图：</p>
<ul>
<li>1直观识别异常值。超过上下边界的认为是异常值；</li>
<li>2看出数据分布的skew和尾重</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data &#x3D; read_csv(filename, names&#x3D;names)</span><br><span class="line">data.plot(kind&#x3D;&#39;box&#39;, subplots&#x3D;True, layout&#x3D;(3,3), sharex&#x3D;False, sharey&#x3D;False)</span><br><span class="line">pyplot.show()</span><br></pre></td></tr></table></figure>
<p>![Box and whisker plots of each attribute](/images/Box and whisker plots of each attribute.png)<br>一下可以看出age,test，skin的数据向smaller values偏斜</p>
<h3 id="Multivariate-Plots-多变量画图"><a href="#Multivariate-Plots-多变量画图" class="headerlink" title="Multivariate Plots(多变量画图)"></a>Multivariate Plots(多变量画图)</h3><p>主要是反应是不同属性间的interaction关系</p>
<h4 id="Correlation-Matrix-Plot"><a href="#Correlation-Matrix-Plot" class="headerlink" title="Correlation Matrix Plot"></a>Correlation Matrix Plot</h4><p>可以参考上面关于相关性的解释</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># Correlation Matrix Plot</span><br><span class="line">from matplotlib import pyplot</span><br><span class="line">from pandas import read_csv</span><br><span class="line">import numpy</span><br><span class="line">filename &#x3D; &#39;pima-indians-diabetes.data.csv&#39;</span><br><span class="line">names &#x3D; [&#39;preg&#39;, &#39;plas&#39;, &#39;pres&#39;, &#39;skin&#39;, &#39;test&#39;, &#39;mass&#39;, &#39;pedi&#39;, &#39;age&#39;, &#39;class&#39;]</span><br><span class="line">data &#x3D; read_csv(filename, names&#x3D;names)</span><br><span class="line">correlations &#x3D; data.corr() # plot correlation matrix</span><br><span class="line">fig &#x3D; pyplot.figure()  # init一个画布</span><br><span class="line">ax &#x3D; fig.add_subplot(111) # 将画布分割成1行1列，图像画在第一块</span><br><span class="line">cax &#x3D; ax.matshow(correlations, vmin&#x3D;-1, vmax&#x3D;1) # matshow是画出矩阵图</span><br><span class="line">fig.colorbar(cax) #给出colorbar</span><br><span class="line">ticks &#x3D; numpy.arange(0,9,1) # tick是刻度的意思</span><br><span class="line">ax.set_xticks(ticks) #设置x刻度范围，步长</span><br><span class="line">ax.set_yticks(ticks)</span><br><span class="line">ax.set_xticklabels(names) #x刻度用names值来表示</span><br><span class="line">ax.set_yticklabels(names)</span><br><span class="line">pyplot.show()</span><br></pre></td></tr></table></figure>
<p>跟多关于绘画的<a href="https://matplotlib.org/index.html" target="_blank" rel="noopener">参考</a></p>
<p>也可以不需要set_xticks，去除ax.set_xticks一下内容，之后图片显示没有label了</p>
<p><img src="/images/Correlation matrix plot1.png" width="50%" height="50%"><img src="/images/Correlation matrix plot2.png" width="50%" height="50%"></p>
<p>其实现在还有一种更好看的画图库<a href="http://seaborn.pydata.org/generated/seaborn.heatmap.html?highlight=heat#seaborn.heatmap" target="_blank" rel="noopener">seaborn</a>来表示热点图</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import seaborn as sns</span><br><span class="line">cr &#x3D; data.corr()</span><br><span class="line"># plot a heatmap of correlation</span><br><span class="line">ax1 &#x3D; sns.heatmap(cr, center &#x3D; 0)</span><br><span class="line">display(cr)</span><br></pre></td></tr></table></figure>
<p>![seaborn example](/images/seaborn example.png)</p>
<h4 id="Scatter-Plot-Matrix-散点图"><a href="#Scatter-Plot-Matrix-散点图" class="headerlink" title="Scatter Plot Matrix(散点图)"></a>Scatter Plot Matrix(散点图)</h4><p>pd.scatter_matrix()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from matplotlib import pyplot</span><br><span class="line">from pandas import read_csv</span><br><span class="line">from pandas.plotting import scatter_matrix</span><br><span class="line">filename &#x3D; &quot;pima-indians-diabetes.data.csv&quot;</span><br><span class="line">names &#x3D; [&#39;preg&#39;, &#39;plas&#39;, &#39;pres&#39;, &#39;skin&#39;, &#39;test&#39;, &#39;mass&#39;, &#39;pedi&#39;, &#39;age&#39;, &#39;class&#39;]</span><br><span class="line">data &#x3D; read_csv(filename, names&#x3D;names)</span><br><span class="line">scatter_matrix(data) # if设置diagonal &#x3D;&#39;kde&#39;,对角线会显示密度图</span><br><span class="line">pyplot.show()</span><br></pre></td></tr></table></figure>
<p>![Scatter plot matrix of the data](/images/Scatter plot matrix of the data.png)</p>
<h3 id="More-links"><a href="#More-links" class="headerlink" title="More links"></a>More links</h3><p><a href="https://blog.csdn.net/qq_34264472/article/details/53814653" target="_blank" rel="noopener">seaborn tutorial</a><br><a href="https://blog.csdn.net/ali197294332/article/details/51694141" target="_blank" rel="noopener">matplotlib tutorial</a><br><a href="https://github.com/JonOnEarth/ML-NANO/blob/master/customer_segments/customer_segments.ipynb" target="_blank" rel="noopener">我的github项目</a></p>
</div><div class="tags"><a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a><a href="/tags/python/">python</a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/">数据科学</a></div><div class="post-nav"><a class="pre" href="/2018/05/27/Deep-Learning-1/">Deep Learning(1)</a><a class="next" href="/2018/05/15/machine-learning-with-python-1/">machine learning with python(1)</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论（请确保 Disqus 可以正常加载）</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'http://jononearth.com/2018/05/18/machine-learning-with-python-2/';
    this.page.identifier = '2018/05/18/machine-learning-with-python-2/';
    this.page.title = 'machine learning with python(2)';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//jononearth.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//jononearth.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://jononearth.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/code/" style="font-size: 15px;">code</a> <a href="/tags/Data-structure/" style="font-size: 15px;">Data structure</a> <a href="/tags/algorithm/" style="font-size: 15px;">algorithm</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E6%97%A0%E8%B6%A3/" style="font-size: 15px;">生活无趣</a> <a href="/tags/deep-learning/" style="font-size: 15px;">deep learning</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">机器学习</a> <a href="/tags/ensmeble/" style="font-size: 15px;">ensmeble</a> <a href="/tags/%E7%BB%8F%E5%85%B8%E7%AE%97%E6%B3%95/" style="font-size: 15px;">经典算法</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/pandas/" style="font-size: 15px;">pandas</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/" style="font-size: 15px;">数据科学</a> <a href="/tags/numpy/" style="font-size: 15px;">numpy</a> <a href="/tags/%E5%BB%BA%E7%AB%99/" style="font-size: 15px;">建站</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" style="font-size: 15px;">面试题</a> <a href="/tags/%E8%B0%83%E5%8F%82/" style="font-size: 15px;">调参</a> <a href="/tags/%E5%AE%A4%E5%86%85%E5%AE%9A%E4%BD%8D/" style="font-size: 15px;">室内定位</a> <a href="/tags/%E6%AF%8F%E6%97%A5%E4%B8%80%E5%90%90/" style="font-size: 15px;">每日一吐</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E8%AF%9D%E4%B8%9C%E6%B8%B8/">大话东游</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E8%AF%9D%E8%A5%BF%E6%B8%B8/">大话西游</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AF%86%E5%AE%A4%E9%80%83%E8%84%B1/">密室逃脱</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%BA%E6%A2%B0%E5%85%AC%E6%95%8C/">机械公敌</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/">极客时间</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%BB%91%E5%AE%A2%E5%B8%9D%E5%9B%BD/">黑客帝国</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/02/15/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/01/2019%E6%80%BB%E7%BB%93%E5%A4%A7%E4%BC%9A/">2019总结大会</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/30/%E5%BB%BA%E7%AB%99%E5%A4%87%E5%BF%98/">建站备忘</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/29/2018-05-07-machine-leaning-index/">Machine Learning 资源汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/29/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BA%94%E7%94%A8%E4%B9%8B%E5%AE%A4%E5%86%85%E5%AE%9A%E4%BD%8D%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90%E6%95%B4%E7%90%86/">Indoor Positioning Resources Document</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/01/%E6%AF%8F%E6%97%A5%E4%B8%80%E5%90%90201812/">每日一吐201812</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/01/2019%E6%96%B0%E5%B9%B4flag/">2019新年flag</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/02/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9F%A5%E8%AF%86%E7%82%B9/">机器学习知识点</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/16/Algorithm-1/">Data structure and algorithm(1)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/10/%E7%9B%90%E6%B9%96%E5%88%B0%E9%BB%84%E7%9F%B36%E5%A4%A9%E4%B8%8D%E5%AE%8C%E5%85%A8%E6%94%BB%E7%95%A5/">盐湖到黄石6天不完全攻略</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//jononearth.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">JonOnEarth.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>